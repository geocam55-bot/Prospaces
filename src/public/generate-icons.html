<!DOCTYPE html>
<html>
<head>
  <title>Generate ProSpaces CRM Icons</title>
  <style>
    body { font-family: system-ui; padding: 20px; max-width: 800px; margin: 0 auto; }
    h1 { color: #9333ea; }
    .icon-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 20px; margin: 20px 0; }
    .icon-item { text-align: center; padding: 10px; border: 1px solid #ddd; border-radius: 8px; }
    canvas { border: 1px solid #ccc; max-width: 100%; height: auto; }
    button { background: #9333ea; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin-top: 8px; }
    button:hover { background: #7c3aed; }
    .download-all { background: #2563eb; padding: 12px 24px; font-size: 16px; margin: 20px 0; }
  </style>
</head>
<body>
  <h1>ProSpaces CRM Icon Generator</h1>
  <p>Click "Download All" to save all icon sizes as PNG files for your PWA.</p>
  
  <button class="download-all" onclick="downloadAll()">Download All Icons</button>
  
  <div class="icon-grid" id="iconGrid"></div>

  <script>
    const sizes = [72, 96, 128, 144, 152, 192, 384, 512];
    const canvases = {};

    function drawIcon(canvas, size) {
      const ctx = canvas.getContext('2d');
      canvas.width = size;
      canvas.height = size;
      
      // Create gradient background
      const gradient = ctx.createLinearGradient(0, 0, size, size);
      gradient.addColorStop(0, '#2563eb');
      gradient.addColorStop(0.5, '#9333ea');
      gradient.addColorStop(1, '#ec4899');
      
      // Draw rounded rectangle background
      const radius = size * 0.2;
      ctx.fillStyle = gradient;
      ctx.beginPath();
      ctx.roundRect(0, 0, size, size, radius);
      ctx.fill();
      
      // Draw building icon in white
      ctx.strokeStyle = '#ffffff';
      ctx.lineWidth = size * 0.03;
      ctx.lineCap = 'round';
      ctx.lineJoin = 'round';
      
      const centerX = size / 2;
      const centerY = size / 2;
      const scale = size / 100;
      
      // Main building
      ctx.strokeRect(centerX - 12.5 * scale, centerY - 30 * scale, 25 * scale, 60 * scale);
      // Left building
      ctx.strokeRect(centerX - 27.5 * scale, centerY - 5 * scale, 15 * scale, 35 * scale);
      // Right building
      ctx.strokeRect(centerX + 12.5 * scale, centerY - 15 * scale, 15 * scale, 45 * scale);
      
      // Windows on main building
      ctx.beginPath();
      const windowY = [-22, -12, -2, 8];
      windowY.forEach(y => {
        ctx.moveTo(centerX - 9 * scale, centerY + y * scale);
        ctx.lineTo(centerX + 9 * scale, centerY + y * scale);
      });
      ctx.stroke();
    }

    function downloadIcon(size) {
      const canvas = canvases[size];
      canvas.toBlob((blob) => {
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `icon-${size}x${size}.png`;
        a.click();
        URL.revokeObjectURL(url);
      }, 'image/png');
    }

    async function downloadAll() {
      for (const size of sizes) {
        await new Promise(resolve => {
          const canvas = canvases[size];
          canvas.toBlob((blob) => {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `icon-${size}x${size}.png`;
            a.click();
            URL.revokeObjectURL(url);
            setTimeout(resolve, 100); // Small delay between downloads
          }, 'image/png');
        });
      }
      alert('All icons downloaded! Upload them to /public/icons/ in your GitHub repo.');
    }

    // Generate all icons
    sizes.forEach(size => {
      const container = document.createElement('div');
      container.className = 'icon-item';
      
      const label = document.createElement('div');
      label.textContent = `${size}x${size}`;
      label.style.marginBottom = '8px';
      label.style.fontWeight = 'bold';
      
      const canvas = document.createElement('canvas');
      drawIcon(canvas, size);
      canvases[size] = canvas;
      
      const btn = document.createElement('button');
      btn.textContent = 'Download';
      btn.onclick = () => downloadIcon(size);
      
      container.appendChild(label);
      container.appendChild(canvas);
      container.appendChild(btn);
      iconGrid.appendChild(container);
    });
  </script>
</body>
</html>